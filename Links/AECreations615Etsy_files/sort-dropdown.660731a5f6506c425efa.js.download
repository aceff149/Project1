(()=>{var t={59189:(t,e,i)=>{t.exports=i(23264)(1089)},17994:(t,e,i)=>{t.exports=i(23264)(2238)},68321:(t,e,i)=>{t.exports=i(23264)(3340)},28605:(t,e,i)=>{t.exports=i(23264)(6004)},47045:(t,e,i)=>{t.exports=i(23264)(6220)},65059:(t,e,i)=>{t.exports=i(23264)(8321)},23264:t=>{"use strict";t.exports=etsy_libs_b4d1730fdf931215e702}};var e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};t[s](o,o.exports,i);return o.exports}(()=>{i.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;i.d(e,{a:e});return e}})();(()=>{i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:true,get:e[s]})}})();(()=>{i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})();(()=>{"use strict";var t=i(65059);var e=i.n(t);var s=i(28605);var n=i.n(s);n().partialsMap=n().partialsMap||{};const o=new(n().Template)({code:function(t,e,i){var s=this;s.b(i=i||"");s.b('<div data-sort-container class="');s.s(s.f("is_anchor_section_and_sort_mweb_enabled",t,e,1),t,e,1,0,0,"")||s.b("wt-pb-xs-2 ");s.b('wt-pb-lg-0">');s.b("\n"+i);s.b('    <div class="wt-menu" data-wt-menu data-menu-type="option" data-open-direction-horiz="right" data-dropdown-uid="sortItems"');if(s.s(s.f("is_anchor_section_and_sort_mweb_enabled",t,e,1),t,e,0,313,380,"{{ }}")){s.rs(t,e,(function(t,e,i){i.b(' data-open-direction-vert="bottom" data-open-direction-force="true"')}));t.pop()}s.b(">");s.b("\n"+i);s.b('        <button type="button" class="wt-menu__trigger wt-btn wt-btn--icon wt-btn--transparent" aria-haspopup="true" aria-expanded="false" data-wt-menu-trigger>');s.b("\n"+i);s.b('            <div class="wt-hide-xs wt-show-lg">');s.b("\n"+i);s.b('                <span class="wt-menu__trigger__label">');s.b(s.v(s.d("messages.sort",t,e,0)));s.b(" ");s.b(s.v(s.d("selected_sort_option.message",t,e,0)));s.b("</span>");s.b("\n"+i);s.b('                <span class="etsy-icon wt-menu__trigger__caret"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><polygon points="16.5 10 12 16 7.5 10 16.5 10"/></svg></span>');s.b("\n"+i);s.b("            </div>");s.b("\n"+i);s.b('            <span class="wt-menu__trigger__label wt-hide-lg">');s.b("\n"+i);s.b('                <span class="etsy-icon" aria-label="Sort"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">');s.b("\n"+i);s.b('  <path d="M16 20.414l3.707-3.707a1 1 0 00-1.414-1.414L17 16.586V6a1 1 0 00-2 0v10.586l-1.293-1.293a1 1 0 10-1.414 1.414L16 20.414zM9 18V7.414l1.293 1.293a1 1 0 001.414-1.414L8 3.586 4.293 7.293a1 1 0 001.414 1.414L7 7.414V18a1 1 0 102 0z"/>');s.b("\n"+i);s.b("</svg></span>");s.b("\n"+i);s.b("            </span>");s.b("\n"+i);s.b("        </button>");s.b("\n"+i);s.b('        <div role="menu" class="wt-menu__body" data-wt-menu-body>');s.b("\n"+i);if(s.s(s.f("sort_options",t,e,1),t,e,0,1595,1828,"{{ }}")){s.rs(t,e,(function(t,e,s){s.b('                <button type="button" role="menuitemradio" class="wt-menu__item ');if(s.s(s.f("hidden",t,e,1),t,e,0,1687,1702,"{{ }}")){s.rs(t,e,(function(t,e,i){i.b("wt-display-none")}));t.pop()}s.b('" tabindex="-1" data-sort-param="');s.b(s.v(s.f("param",t,e,0)));s.b('">');s.b("\n"+i);s.b("                    ");s.b(s.v(s.f("message",t,e,0)));s.b("\n"+i);s.b("                </button>");s.b("\n"+i)}));t.pop()}s.b("        </div>");s.b("\n"+i);s.b("    </div>");s.b("\n"+i);s.b("</div>");return s.fl()},partials:{},subs:{}},"",n());o.name="pages/shop2/neu/_modules/listings/sort-dropdown.mustache";n().partialsMap[o.name]=o;const r=function(t){t=t||{};t._messages=window.Etsy.message_catalog;return o.render.call(o,t,n().partialsMap)};r.template=o;const a=r;var u=i(47045);var d=i(17994);const l=function(t,e){if(!t||!e||"object"!==typeof t&&!Array.isArray(t))return;"object"===typeof t&&(t=Object.values(t));return t.find((t=>Object.keys(e).every((i=>t[i]===e[i]))))};const h=l;const c={top:["bottom","top-right","top-left","bottom-right","bottom-left"],bottom:["top","bottom-right","bottom-left","top-right","top-left"],"top-left":["bottom-left","top-right","bottom-right","top","bottom"],"top-right":["bottom-right","top-left","bottom-left","top","bottom"],"bottom-left":["top-left","bottom-right","top-right","bottom","top"],"bottom-right":["top-right","bottom-left","top-left","bottom","top"]};const m={ACTION:"action",OPTION:"option"};const p={BEFORE_OPEN:"wtMenuBeforeOpen",OPEN:"wtMenuOpen",BEFORE_CLOSE:"wtMenuBeforeClose",CLOSE:"wtMenuClose",CHOOSE:"wtMenuChoose"};const g={APPEND:"append"};const _={TRIGGER_ELEMENT:"[data-wt-menu-trigger]",BODY_ELEMENT:"[data-wt-menu-body]",MENU_ITEMS:"[role='menu'] [role*='menuitem']:not([disabled]),[role='menu'] input:not([disabled]),[role='menu'] button:not([disabled]), [data-wt-menu-body] [data-wt-menu-item]",SELECTED_MENU_ITEM:"[role='menuitemradio'][aria-checked='true']",LABEL_ELEMENT:".wt-menu__trigger__label"};const E={PREFIX:"wt-menu--",HIDE_TRIGGER:"wt-menu--hide-trigger-on-open",SELECTED:"wt-is-selected",WILL_ANIMATE:"wt-menu__body--will-animate",TRIGGER_WILL_ANIMATE:"wt-menu__trigger--will-animate",LABEL_SELECTED:"wt-menu__trigger-label--selected",IS_OPEN:"wt-overlay__is-open"};const f={UP:"up",DOWN:"down"};const T={TOP:"top",BOTTOM:"bottom"};const v={LEFT:"left",RIGHT:"right",CENTER:"center"};const O={OPEN_ANIMATION_TIMEOUT:180};var I=i(68321);function b(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}class w{constructor(){b(this,"state",void 0);b(this,"elements",void 0);b(this,"listeners",void 0);this.elements={};this.listeners=[]}getState(){return this.state}setState(t,e){if("object"===typeof t)for(const i in t)void 0!==t[i]&&(this.state[i]=t[i]);else t in this.state&&void 0!==e&&(this.state[t]=e);this.notifyListeners()}addListener(t){this.listeners=this.listeners||[];this.listeners.push(t)}notifyListeners(){const t=this.getState();this.listeners=this.listeners||[];this.listeners.forEach((e=>{e(t)}))}setElements(t){this.elements={...this.elements,...t}}}const C=w;function D(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}class L{constructor(t){D(this,"timeout",null);D(this,"promise",void 0);this.promise=0===t?Promise.resolve():new Promise((e=>{this.timeout=setTimeout(e,t)}))}getPromise(){return this.promise}cancel(){this.timeout&&clearTimeout(this.timeout)}then(t){return this.promise.then(t)}}function y(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}class R extends C{constructor(t,e,i){super();y(this,"state",void 0);y(this,"options",void 0);y(this,"ui",void 0);y(this,"id",void 0);y(this,"_animationTimeout",void 0);y(this,"_docMouseDownListener",void 0);y(this,"_docMouseUpListener",void 0);y(this,"_docMouseDownTargetWasOutsideMenu",void 0);y(this,"triggerSizeAndPosition",void 0);y(this,"menuBodyHeight",void 0);y(this,"menuBodyWidth",void 0);y(this,"currentFocusIdx",void 0);y(this,"vertOpenDirection",void 0);y(this,"horizOpenDirection",void 0);y(this,"$allMenuItems",void 0);this.options={...R.DEFAULT_OPTIONS,...e};this.state={...R.DEFAULT_STATE,...i};this.ui={element:t,trigger:t.querySelector(_.TRIGGER_ELEMENT),body:t.querySelector(_.BODY_ELEMENT),items:t.querySelectorAll(_.MENU_ITEMS)};this.id=this.ui.element.getAttribute("id");this._animationTimeout=null;this._docMouseDownListener=null;this._docMouseUpListener=null;this._docMouseDownTargetWasOutsideMenu=false;this.options.hideTriggerOnOpen&&this.ui.element.classList.add(E.HIDE_TRIGGER)}updateMenuItemRefs(){var t;this.ui.items=null===(t=this.ui.body)||void 0===t?void 0:t.querySelectorAll(_.MENU_ITEMS)}open(t){var e,i,s,n,o,r,a;if(this.state.isOpen||this.state.isOpening)return false;null===(e=this.ui.body)||void 0===e?void 0:e.classList.add(E.WILL_ANIMATE);null===(i=this.ui.trigger)||void 0===i?void 0:i.classList.add(E.TRIGGER_WILL_ANIMATE);this.setState({isClosing:false,isOpening:true});this.ui.items=null===(s=this.ui.body)||void 0===s?void 0:s.querySelectorAll(_.MENU_ITEMS);this.triggerSizeAndPosition=null===(n=this.ui.trigger)||void 0===n?void 0:n.getBoundingClientRect();if(this.ui.body){const t=parseInt(getComputedStyle(this.ui.body).minWidth);this.triggerSizeAndPosition&&this.triggerSizeAndPosition.width&&this.triggerSizeAndPosition.width>t&&(this.ui.body.style.minWidth=`${this.triggerSizeAndPosition.width}px`)}this.menuBodyHeight=null===(o=this.ui.body)||void 0===o?void 0:o.offsetHeight;this.menuBodyWidth=null===(r=this.ui.body)||void 0===r?void 0:r.offsetWidth;this._setupVertOpen();this._setupHorizOpen();null===(a=this.ui.trigger)||void 0===a?void 0:a.setAttribute("aria-expanded","true");this._animationTimeout=new L(this.options.animateIn?R.CONSTANTS.OPEN_ANIMATION_TIMEOUT:0);return this._animationTimeout.then((()=>{var e;null===(e=this.ui.trigger)||void 0===e?void 0:e.classList.remove(E.TRIGGER_WILL_ANIMATE);this.setState({isClosing:false,isOpening:false,isOpen:true});this._animationTimeout=null;this._docMouseDownListener=this._handleOutsideMouseDownClose.bind(this);this._docMouseUpListener=this._handleOutsideMouseUpClose.bind(this);document.addEventListener("mousedown",this._docMouseDownListener);document.addEventListener("mouseup",this._docMouseUpListener);document.addEventListener("touchstart",this._docMouseDownListener);document.addEventListener("touchend",this._docMouseUpListener);this._resetFocus(t)}))}_resetFocus(t){var e;this.ui.items=null===(e=this.ui.body)||void 0===e?void 0:e.querySelectorAll(_.MENU_ITEMS);const i=this.ui.items;if(i){const e=Array.from(i).find((t=>true===t.hasAttribute("aria-checked")));t&&I["default"].isUpKey(t)?this._setFocus(i.length-1):t&&I["default"].isDownKey(t)?this._setFocus(0):e?this._setFocus(this._findItemIndex(e)):this._setFocus(0)}}_handleOutsideMouseUpClose(t){if(this.state.isOpening||this.state.isClosing||!this.state.isOpen||!this._docMouseDownTargetWasOutsideMenu)return false;if(window.TouchEvent&&t instanceof TouchEvent&&"touchend"===t.type){const e=t.changedTouches[0];if(e){const t=document.elementFromPoint(e.clientX,e.clientY);if(this.ui.element.contains(t))return false}}if((t.target instanceof HTMLElement||t.target instanceof Node)&&this.ui.element.contains(t.target))return false;this.close();this._docMouseDownTargetWasOutsideMenu=false;return}_handleOutsideMouseDownClose(t){if(this.state.isOpening||this.state.isClosing||!this.state.isOpen)return false;if(t.target instanceof Node&&this.ui.element.contains(t.target)){this._docMouseDownTargetWasOutsideMenu=false;return}this._docMouseDownTargetWasOutsideMenu=true;return}close(){var t,e;if(this._animationTimeout){if(this.state.isClosing)return this._animationTimeout.getPromise();this._animationTimeout.cancel();this._animationTimeout=null}else if(!this.state.isOpen){this.setState({isClosing:false,isOpening:false,isOpen:false});return new L(0).getPromise()}let i;try{var s;i=!(null===(s=this.ui.body)||void 0===s||!s.matches(":focus-within"))}catch(n){i=true}null===(t=this.ui.trigger)||void 0===t?void 0:t.classList.add(E.TRIGGER_WILL_ANIMATE);this.setState({isClosing:true,isOpening:false});this.ui.element.classList.remove(E.IS_OPEN);null===(e=this.ui.trigger)||void 0===e?void 0:e.setAttribute("aria-expanded","false");this._animationTimeout=new L(this.options.animateIn?R.CONSTANTS.OPEN_ANIMATION_TIMEOUT:0);return this._animationTimeout.then((()=>{var t,e;null===(t=this.ui.body)||void 0===t?void 0:t.classList.remove(E.WILL_ANIMATE);null===(e=this.ui.trigger)||void 0===e?void 0:e.classList.remove(E.TRIGGER_WILL_ANIMATE);this.setState({isClosing:false,isOpening:false,isOpen:false});this.currentFocusIdx=void 0;this._animationTimeout=null;this._docMouseDownListener=this._handleOutsideMouseDownClose.bind(this);this._docMouseUpListener=this._handleOutsideMouseUpClose.bind(this);document.removeEventListener("mousedown",this._docMouseDownListener);document.removeEventListener("mouseup",this._docMouseUpListener);document.removeEventListener("touchstart",this._docMouseDownListener);document.removeEventListener("touchend",this._docMouseUpListener);if(i){var s;null===(s=this.ui.trigger)||void 0===s?void 0:s.focus()}}))}toggle(){return this.state.isOpen?this.close():this.open()}isTargetSelectable(t){const e=t.getAttribute("role");const i="menuitemradio"===e;const s="INPUT"===t.tagName;const n=t instanceof HTMLInputElement&&("radio"===t.type||"checkbox"===t.type);return s&&n||i}select(t){const e=t.target||t.currentTarget;if(!(e instanceof HTMLElement))return;const i="INPUT"===e.tagName;const s=this.isTargetSelectable(e);if(s&&this.options.menuType===m.OPTION){var n,o;const t=i&&e instanceof HTMLInputElement?e.value:null===(n=e.textContent)||void 0===n?void 0:n.trim();null===(o=this.ui.items)||void 0===o?void 0:o.forEach((e=>{var s;if((null===(s=e.textContent)||void 0===s?void 0:s.trim())===t){e.classList.add(E.SELECTED);e.classList.add("wt-options__item--selected");e.setAttribute("aria-checked","true");i&&e.setAttribute("checked","true")}else{e.classList.remove(E.SELECTED);e.classList.remove("wt-options__item--selected");e.removeAttribute("aria-checked");i&&e.removeAttribute("checked")}}))}s&&this.options.closeOnSelect&&this.close()}_setupVertOpen(){const t=this.vertOpenDirection;this.vertOpenDirection=this._getVertOpenDirection();if(this.vertOpenDirection!==t){this.ui.element.classList.remove(E.PREFIX+t);if(!this.options.menuBodyBelowTrigger&&this.ui.body){this.ui.body.style.paddingBottom="0px";this.ui.body.style.paddingTop="0px"}}this.ui.element.classList.add(E.PREFIX+this.vertOpenDirection);if(this.ui.body&&!this.options.menuBodyBelowTrigger&&!this.options.hideTriggerOnOpen){var e;const t=null===(e=this.triggerSizeAndPosition)||void 0===e?void 0:e.height;this.vertOpenDirection===R.VERT_DIRECTION.TOP?this.ui.body.style.paddingBottom=`${t}px`:this.ui.body.style.paddingTop=`${t}px`}}_getVertOpenDirection(){const t=R.VERT_DIRECTION.BOTTOM;if(this.options.openDirectionForce){var e;return null!==(e=this.options.openDirectionVert)&&void 0!==e?e:t}if("undefined"!==typeof window&&this.triggerSizeAndPosition&&this.menuBodyHeight&&this.triggerSizeAndPosition.bottom&&this.triggerSizeAndPosition.top){const t=document.documentElement.clientHeight;const e=t-this.triggerSizeAndPosition.bottom;const i=this.triggerSizeAndPosition.top;const s=this.menuBodyHeight<=e;const n=this.menuBodyHeight<=i;if(s||n){if(this.options.openDirectionVert===R.VERT_DIRECTION.BOTTOM)return s?R.VERT_DIRECTION.BOTTOM:R.VERT_DIRECTION.TOP;if(this.options.openDirectionVert===R.VERT_DIRECTION.TOP)return n?R.VERT_DIRECTION.TOP:R.VERT_DIRECTION.BOTTOM}const o=i+window.pageYOffset;const r=document.documentElement.scrollHeight-(window.pageYOffset+this.triggerSizeAndPosition.bottom);const a=this.menuBodyHeight<=o;const u=this.menuBodyHeight<=r;if(a||u){if(this.options.openDirectionVert===R.VERT_DIRECTION.TOP)return a?R.VERT_DIRECTION.TOP:R.VERT_DIRECTION.BOTTOM;if(this.options.openDirectionVert===R.VERT_DIRECTION.BOTTOM)return u?R.VERT_DIRECTION.BOTTOM:R.VERT_DIRECTION.TOP}}return t}_setupHorizOpen(){const t=this.horizOpenDirection;this.horizOpenDirection=this._getHorizOpenDirection();this.horizOpenDirection!==t&&this.ui.element.classList.remove(E.PREFIX+t);this.ui.element.classList.add(E.PREFIX+this.horizOpenDirection)}_getHorizOpenDirection(){const t=R.HORIZ_DIRECTION.LEFT;if(this.options.openDirectionForce){var e;return null!==(e=this.options.openDirectionHoriz)&&void 0!==e?e:t}if(this.triggerSizeAndPosition&&this.menuBodyHeight&&this.menuBodyWidth&&this.triggerSizeAndPosition.width&&this.triggerSizeAndPosition.left&&this.triggerSizeAndPosition.right){const e=this.menuBodyWidth-this.triggerSizeAndPosition.width;if(e<=0){var i;return null!==(i=this.options.openDirectionHoriz)&&void 0!==i?i:t}const s=document.documentElement.clientWidth;const n=this.triggerSizeAndPosition.left;const o=s-this.triggerSizeAndPosition.right;const r=e<=n;const a=e<=o;const u=e/2<=n&&e/2<=o;if(r||a||u){if(this.options.openDirectionHoriz===R.HORIZ_DIRECTION.CENTER){if(u)return R.HORIZ_DIRECTION.CENTER;return a?R.HORIZ_DIRECTION.LEFT:R.HORIZ_DIRECTION.RIGHT}if(this.options.openDirectionHoriz===R.HORIZ_DIRECTION.RIGHT)return r?R.HORIZ_DIRECTION.RIGHT:a?R.HORIZ_DIRECTION.LEFT:R.HORIZ_DIRECTION.CENTER;if(this.options.openDirectionHoriz===R.HORIZ_DIRECTION.LEFT)return a?R.HORIZ_DIRECTION.LEFT:r?R.HORIZ_DIRECTION.RIGHT:R.HORIZ_DIRECTION.CENTER}}return t}_handleKeydown(t){if(t.altKey||t.ctrlKey)return true;const e=document.activeElement;const i=t.key;if(I["default"].isTabKey(i)){if(this.state.isOpen)if(this.options.containFocus){t.preventDefault();this._moveFocus(t.shiftKey?R.FOCUS_DIRECTION.UP:R.FOCUS_DIRECTION.DOWN)}else setTimeout((()=>{this.close()}),0)}else if(I["default"].isEscKey(i))this.state.isOpen&&this.close();else if(I["default"].isEnterKey(i)){const i=t.target||t.currentTarget;if(this.state.isOpen||e!==this.ui.trigger){if(i instanceof HTMLElement&&"INPUT"===(null===i||void 0===i?void 0:i.tagName)&&this.state.isOpen){t.preventDefault();this.select(t)}}else{t.preventDefault();this.open(I["default"].ENTER_KEY)}}else if(I["default"].isSpaceKey(i)){if(this.state.isOpen&&t.target instanceof HTMLElement&&!this._isTargetFormElement(t.target)){t.preventDefault();this.select(t)}}else if(I["default"].isDownKey(i)){t.preventDefault();this.state.isOpen||e!==this.ui.trigger?this.state.isOpen&&this._moveFocus(R.FOCUS_DIRECTION.DOWN):this.open(I["default"].DOWN_KEY)}else if(I["default"].isUpKey(i)){t.preventDefault();this.state.isOpen||e!==this.ui.trigger?this.state.isOpen&&this._moveFocus(R.FOCUS_DIRECTION.UP):this.open(I["default"].UP_KEY)}else if(I["default"].isHomeKey(i)||I["default"].isPageUpKey(i)){var s;t.preventDefault();null===(s=this.$allMenuItems)||void 0===s?void 0:s.eq(0).focus()}else if(I["default"].isEndKey(i)||I["default"].isPageDownKey(i)){var n;t.preventDefault();null===(n=this.$allMenuItems)||void 0===n?void 0:n.eq(-1).focus()}return}_setFocus(t){this.currentFocusIdx=t;if(this.ui.items){var e;null===(e=this.ui.items[this.currentFocusIdx])||void 0===e?void 0:e.focus()}}_findItemIndex(t){var e;let i=-1;null===(e=this.ui.items)||void 0===e?void 0:e.forEach(((e,s)=>{e===t&&(i=s)}));return i}_moveFocus(t){let e=0;if(document.activeElement&&document.activeElement instanceof HTMLElement&&this.ui.element.contains(document.activeElement)){const t=this._findItemIndex(document.activeElement);t>=0&&(this.currentFocusIdx=t)}if(void 0!==this.currentFocusIdx){t===R.FOCUS_DIRECTION.DOWN&&(e=this.ui.items&&this.currentFocusIdx===this.ui.items.length-1?0:this.currentFocusIdx+1);t===R.FOCUS_DIRECTION.UP&&(e=this.ui.items&&0===this.currentFocusIdx?this.ui.items.length-1:this.currentFocusIdx-1)}this._setFocus(e)}_isTargetFormElement(t){return"undefined"!==typeof window&&(t instanceof window.HTMLInputElement||t instanceof window.HTMLTextAreaElement)}}y(R,"CONSTANTS",O);y(R,"FOCUS_DIRECTION",f);y(R,"VERT_DIRECTION",T);y(R,"HORIZ_DIRECTION",v);y(R,"DEFAULT_OPTIONS",{animateIn:true,closeOnSelect:true,containFocus:false,hideTriggerOnOpen:false,menuBodyBelowTrigger:false,menuType:m.ACTION,triggerUpdateType:void 0,openDirectionForce:false,openDirectionHoriz:R.HORIZ_DIRECTION.LEFT,openDirectionVert:R.VERT_DIRECTION.BOTTOM});y(R,"DEFAULT_STATE",{isOpen:false,isOpening:false,isClosing:false});const N=R;function M(t){return t===m.OPTION}function S(t){return void 0!==t&&Object.values(g).includes(t)}function A(t){let e=t.querySelector(`span.${E.LABEL_SELECTED}`);if(null!==e)return e;e=document.createElement("span");e.classList.add(E.LABEL_SELECTED);const i=t.querySelector(_.LABEL_ELEMENT);null===i||void 0===i?void 0:i.appendChild(e);null===i||void 0===i?void 0:i.classList.add("wt-text-truncate");t.classList.add("wt-max-width-full");return e}function P(t,e,i,s){if(!M(i)||!S(s))return;const n=t&&t.textContent?t.textContent.trim():"";if(!n.length)return;s===g.APPEND&&(A(e).textContent=n)}var F=i(59189);function H(t,e){if(t)return true;const i=new Error(e);false;F["default"].captureException(i);return false}function x(t){const e={...t.dataset};for(const i in e){const t=e[i];if("true"!==t&&"false"!==t)continue;e[i]="true"===t}return e}function B(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}class U{constructor(t,e,i){var s,n;B(this,"menuCore",void 0);const o=x(t);this.menuCore=new N(t,{...e,...o},{...i});null===(s=this.menuCore.ui.trigger)||void 0===s?void 0:s.addEventListener("click",this.menuCore.toggle.bind(this.menuCore));null===(n=this.menuCore.ui.items)||void 0===n?void 0:n.forEach((t=>{t.addEventListener("click",(t=>{this.menuCore.select(t);this._handleChoose(t)}));"true"===t.getAttribute("aria-checked")&&P(t,this.menuCore.ui.element,this.menuCore.options.menuType,this.menuCore.options.triggerUpdateType)}));this.menuCore.ui.element.addEventListener("keydown",(t=>{const e=I["default"].isSpaceKey(t.key)||I["default"].isEnterKey(t.key);if(document.activeElement instanceof HTMLElement){const i=this.menuCore.isTargetSelectable(document.activeElement);e&&i&&this._handleChoose(t)}this.menuCore._handleKeydown(t)}));this.menuCore.addListener((t=>{this.handleStateChange(t)}));this._initialize();if(!H(t,"Menu - The element provided to the constructor does not exist"))return}_initialize(){return}handleStateChange(t){t.isClosing?this._handleClosing():t.isOpening?this._handleOpening():t.isOpen?this._handleOpen():this._handleClose()}_handleOpen(){this.menuCore.ui.element.dispatchEvent(new CustomEvent(p.OPEN))}_handleOpening(){this.menuCore.ui.element.dispatchEvent(new CustomEvent(p.BEFORE_OPEN))}_handleClosing(){this.menuCore.ui.element.dispatchEvent(new CustomEvent(p.BEFORE_CLOSE))}_handleClose(){this.menuCore.ui.element.dispatchEvent(new CustomEvent(p.CLOSE))}_handleChoose(t){this.menuCore.ui.element.dispatchEvent(new CustomEvent(p.CHOOSE,t));if(null===t.target||!(t.target instanceof HTMLElement))return;P(t.target,this.menuCore.ui.element,this.menuCore.options.menuType,this.menuCore.options.triggerUpdateType)}}const z=e()("[data-sort-container]");const V=u["default"].getData("sort_by_tmpl_data","");z.html(a(V));W();function W(){const t=z.find('[data-dropdown-uid="sortItems"]').get();t.forEach(((t,i)=>{const s=t.getAttribute("data-dropdown-uid")+i;t.setAttribute("data-dropdown-uid",s);new U(t);t.addEventListener("wtMenuChoose",(t=>{t.preventDefault();const i=e()(t.target.querySelector('[aria-checked="true"]')).data("sort-param");if(i){k(i);d["default"].logEvent({event_name:"shop_home_dropdown_engagement",sort_param:i});e()(document).trigger("listings:changeSort",{sort_order:i})}}));t.addEventListener("wtMenuOpen",(t=>{d["default"].logEvent({event_name:"shop_home_dropdown_open"})}))}));V.selected_sort_option&&V.selected_sort_option.param&&z.find(`[data-sort-param="${V.selected_sort_option.param}"]`).addClass("wt-is-selected").attr("aria-selected",true)}function G(){z.html(a(V));W()}function K(t,e,i){const s=h(V.sort_options,{param:t});if(s){s.selected=i;s.hidden=e}}function k(t){const e=h(V.sort_options,{param:t});if(e){e.selected=true;V.selected_sort_option=e}G()}z.on("click",".list-nav-item",(function(t){t.preventDefault();const i=e()(this).data("sort-param");k(i);d["default"].logEvent({event_name:"shop_home_dropdown_engagement",sort_param:i});e()(document).trigger("listings:changeSort",{sort_order:i})}));e()(document).on("sortDropdown:showCustom",((t,e)=>{K("custom",false,false);k(e.sort_order||"custom")}));e()(document).on("sortDropdown:hideCustom",((t,e)=>{K("custom",true,false);e.sort_order&&k(e.sort_order)}));e()(document).on("sortDropdown:changeSort",((t,e)=>{e.sort_order&&k(e.sort_order)}))})()})();
//# sourceMappingURL=https://www.etsy.com/sourcemaps/evergreenVendor/en-US/shop2/modules/sort-dropdown.660731a5f6506c425efa.js.map